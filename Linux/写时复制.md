一个进程在读取某个资源的时候，系统让他直接使用已有的资源，而不是复制一份,写的时候触发复制

## 修改
使用mmap将文件映射到内存，有两种映射方式：
共享映射，私有映射

- 共享映射
两个程序只保存修改的页，而不是全部复制一份
使用fsync写回，后写的覆盖前写的页面，有不重叠的部分不会覆盖

- 私有映射
私有映射的修改不会修改源文件，断电就消失，源文件不动，如果要写会就要用共享映射重新打开，或者手动write回去

mmap有匿名映射（分配内存空间）与文件映射两种方式

## fork()的实现
复制父进程的task_struct与页表，但是物理页标记为只读的
谁先写谁触发缺页，然后复制一份之后父子独立

“除了PID与返回值不同，剩下的在创建的时候都相同，只有触发写的时候才会有分裂”

## 应用
- fork秒建进程
- mmap私有改大文件
- Docker镜像分层
- btrfs/ZFS 快照
