- 清空日志
`sudo bash -c '> /var/log/syslog'`
## grep
| 选项    | 记忆关键词       | 作用                        |
| ----- | ----------- | ------------------------- |
| -i    | ignore-case | 不区分大小写                    |
| -v    | invert      | 反选，打印**不匹配**的行            |
| -n    | number      | 显示行号                      |
| -c    | count       | 只输出匹配的行数                  |
| -l    | list        | 只输出**包含匹配的文件名**（常用于批量找文件） |
| -L    | opposite -l | 只输出**不包含匹配的文件名**          |
| -r/-R | recursive   | 递归目录；-R 跟随符号链接            |
| -w    | word        | 整词匹配（单词边界）                |
| -A N  | after       | 匹配行之后附赠 N 行上下文            |
| -B N  | before      | 匹配行之前附赠 N 行               |
| -C N  | context     | 前后各 N 行（= -A N -B N）      |
| -E    | extended    | 使用“扩展正则”ERE（等效于 egrep）    |

```bash
# 在系统日志中查找所有ERROR级别的记录
grep -i "error" /var/log/syslog | tail -20grep -i "error" /var/log/syslog | tail -20
```

## awk
如果说 grep 是筛选行，awk 就是切割列并计算。它是处理结构化/半结构化数据的利器。
**核心概念：awk 把每行自动切成$1, $2, $3...**
#### **基础实战：分析进程输出**
1. **提取特定列**：
```bash
# 仅显示ps aux的PID和命令
ps aux | awk '{print $2, $11}'

# 显示CPU使用率>1%的进程
ps aux | awk '$3 > 1.0 {print $11, $3"%"}'
```
2. **统计计算**：
```bash
# 统计所有bash进程的总内存占用
ps aux | grep bash | awk '{sum += $4} END {print "Total MEM:", sum"%"}'

# 按用户统计进程数
ps aux | awk '{count[$1]++} END {for(user in count) print user, count[user]}'
```

- 如：
```bash
# 1. 提取所有IP地址
awk '{print $1}' access.log

# 2. 统计每个IP的访问次数
awk '{ip_count[$1]++} END {for(ip in ip_count) print ip, ip_count[ip]}' access.log

# 3. 计算总传输字节数（第10列）
awk '{sum += $10} END {print "Total bytes:", sum}' access.log

# 4. 只统计状态码为200的请求
awk '$9 == 200 {print $1, $7}' access.log
```

## sed
`sed` 擅长**批量替换、删除、插入文本**。适合修改配置文件、清理数据。
#### 选项
- `-n` 关闭默认输出，只打印你显式 `p` 的行
- `-e` 允许多条脚本，可省略，用分号也行
- `-f` 从文件读脚本
- `-i` 就地修改（GNU 支持 `-i.bak` 自动备）
- `-r` 启用扩展正则（ERE），省得写 `\(\)` `\{m,n\}`
- `-E` BSD/macOS 的 ERE 开关（与 GNU `-r` 同义）

#### 命令
- `p` print 打印（通常配合 `-n`）
- `d` delete 删除行
- `s/old/new/` substitute 替换
- `i\` insert 在当前行**前面**插入文本
- `a\` append 在当前行**后面**插入文本
- `c\` change 整行改成新文本
- `q` quit 立即退出，大文件提速

#### 地址
可以没有（表示全局），也可以组合，常见 5 种
- 行号：`5` 第 5 行
- 范围：`3,7` 3 到 7 行；`3,+4` 3 行及之后 4 行
- 正则：`/regex/` 匹配行；`/start/,/stop/` 区间
- 步长：`1~2` 从第 1 行开始，每隔 2 行（奇数行）
- `$` 最后一行

## sort
sort -n          # 按数值排
sort -nr         # 数值降序
sort -k2n        # 第 2 列数值升序
sort -k2nr       # 第 2 列数值降序
sort -u          # 去重
sort -h          # human-readable 大小（du -h 专用）