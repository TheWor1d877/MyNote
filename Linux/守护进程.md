守护进程（Daemon）是在后台运行、不与任何控制终端关联的长期服务进程
```c
// 1. fork() 创建子进程，父进程退出
pid_t pid = fork();
if (pid > 0) exit(0);  // 父进程退出，子进程被init接管

// 2. setsid() 创建新会话，脱离终端
setsid();

// 3. 再次 fork()（可选但推荐，防止获得终端）
pid = fork();
if (pid > 0) exit(0);

// 4. 关闭所有打开的文件描述符
for (int i = 0; i < sysconf(_SC_OPEN_MAX); i++) close(i);

// 5. 重定向标准流到 /dev/null 或日志文件
open("/dev/null", O_RDONLY);  // stdin
open("/dev/null", O_WRONLY);  // stdout  
open("/dev/null", O_WRONLY);  // stderr

// 可选：改变工作目录到根
chdir("/");

// 可选：设置文件创建掩码
umask(0);
```
